<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo modal</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/Hauptseite/Homepage-modal.css" />
  </head>

  <body>
    <!-- navbar -->
    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1 gradient-color">Task plan</span>

    
        <div class="justify-content-end">
          <button
            class="btn me-2 btn-outline-secondary"
            type="button"
            id="darkmode"
          >
            Darkmode
          </button>
          <a class="navbar-brand">
            <img
              src="/Hauptseite/Logo-TIE-International.png"
              alt="TIE"
              width="48"
              height="40"
            />
          </a>
        </div>
      </div>
    </nav>
    <div class="fs-3 ms-3" id="kw"></div>
    <div class="container text-center mx-auto">
        <div class="row" style="height: 75vh">
            <!-- monday -->
            <div class="col bg-light-subtle rounded-start-4">
                <div class="text-start border-bottom border-warning-bottom mb-4 mt-2 gradient-color fs-4">Monday</div>
                <div id="cardmonday">
                    <!-- Cards will be generated here -->
                </div>
            </div>
            <!-- tuesday -->
            <div class="col bg-secondary-subtle">
                <div class="text-start border-bottom border-warning-bottom mb-4 mt-2 gradient-color fs-4">Tuesday</div>
                <div id="cardtuesday"></div>
            </div>
            <!-- wednesday -->
            <div class="col bg-light-subtle">
                <div class="text-start border-bottom border-warning-bottom mb-4 mt-2 gradient-color fs-4">Wednesday</div>
                <div id="cardwednesday"></div>
            </div>
            <!-- thursday -->
            <div class="col bg-secondary-subtle">
                <div class="text-start border-bottom border-warning-bottom mb-4 mt-2 gradient-color fs-4">Thursday</div>
                <div id="cardthursday"></div>
            </div>
            <!-- friday -->
            <div class="col bg-light-subtle rounded-end-4">
                <div class="text-start border-bottom border-warning-bottom mb-4 mt-2 gradient-color fs-4">Friday</div>
                <div id="cardfriday"></div>
            </div>
        </div>
      </div>
    </div>
    <!-- modal for monday -->
    <div id="modalmonday">
    </div>
    <!-- modal for tuesday -->
    <div id="modaltuesday">
    </div>
    <!-- modal for wednesday -->
    <div id="modalwednesday">
    </div>
    <!-- modal for thursday -->
    <div id="modalthursday">
    </div>
    <!-- modal for friday -->
    <div id="modalfriday">
    </div>
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <!-- localstorage for checkbox -->
    <script>
      function updateLocalStorage() {
        const checkboxes = document.querySelectorAll('input[type="checkbox"]');

        checkboxes.forEach((checkbox) => {
          checkbox.addEventListener("change", function () {
            const id = this.id; // Get the ID of the clicked checkbox
            const checked = this.checked; // Get the checked state
            localStorage.setItem(id, checked); // Update local storage
          });
        });

        // Initialize checkboxes based on local storage
        checkboxes.forEach((checkbox) => {
          const id = checkbox.id; // Get the ID of the checkbox
          const checked = localStorage.getItem(id); // Get the stored value
          if (checked !== null) {
            checkbox.checked = checked === "true"; // Set the checkbox state
          }
        });
      }

      // Call the updateLocalStorage function to initialize checkboxes
      updateLocalStorage();
    </script>
    <!-- darkmode and weeknumber -->
    <script>
      // Function to toggle Dark Mode
      function toggleDarkMode() {
        const htmlTag = document.documentElement;
        const darkmodeButton = document.getElementById("darkmode");

        // Toggle the data-bs-theme attribute value
        if (htmlTag.getAttribute("data-bs-theme") === "dark") {
          htmlTag.setAttribute("data-bs-theme", "light");
          darkmodeButton.innerText = "Lightmode";
          localStorage.setItem("mode", "light");
        } else {
          htmlTag.setAttribute("data-bs-theme", "dark");
          darkmodeButton.innerText = "Darkmode";
          localStorage.setItem("mode", "dark");
        }
      }
      // Check local storage for the saved mode
      const savedMode = localStorage.getItem("mode");
      if (savedMode === "dark") {
        // Apply dark mode
        document.documentElement.setAttribute("data-bs-theme", "dark");
        document.getElementById("darkmode").innerText = "Lightmode";
      } else {
        // Apply light mode (default)
        document.documentElement.setAttribute("data-bs-theme", "light");
        document.getElementById("darkmode").innerText = "Darkmode";
      }
      // Attach the toggleDarkMode function to the Darkmode button's click event
      document
        .getElementById("darkmode")
        .addEventListener("click", toggleDarkMode);
      document.getElementById("darkmode").addEventListener("click", changeMode);
      function changeMode() {
        if (document.getElementById("darkmode").innerText === "Darkmode") {
          document.getElementById("darkmode").innerText = "Lightmode";
        } else document.getElementById("darkmode").innerText = "Darkmode";
      }
      // Kalenderwoche Anzeigen
      let date = new Date();
      function getWeekNumber(date) {
        date = new Date(date);
        date.setHours(0, 0, 0, 0);
        date.setDate(date.getDate() + 4 - (date.getDay() || 7));
        let yearStart = new Date(date.getFullYear(), 0, 1);
        let weekNumber = Math.ceil(((date - yearStart) / 86400000 + 1) / 7);
        return weekNumber;
      }

      let currentWeek = getWeekNumber(date);
      let currentWeekString = currentWeek.toString();
      document.getElementById("kw").innerHTML = "KW " + currentWeekString;
    </script>
    <!-- amount of cards -->
    <script>
      assignmentsJSON = localStorage.getItem("assignments");
      assignments = JSON.parse(assignmentsJSON);
      let name;

      function generateCardAndModal(day, assignmentName, taskName, index) {
        // Create a new card element
        const cardId = `card${day}${index}`;
        const card = document.createElement("div");
        card.className = "card mx-auto mb-5";
        card.innerHTML = `
      <div class="card-body">
        <div class="card-title fs-5 fw-semibold" id="${cardId}">
          ${taskName}
        </div>
        <div class="card-text" id="cardname${day}${index}">
          ${assignmentName}
        </div>
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <button
              type="button"
              class="btn btn-outline-primary btn-sm-custom"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal${day}${index}"
              data-bs-whatever="@${day}${index}"
            >
              Comment
            </button>
          </div>
          <label class="check mt-3">
            Done
            <input class="ms-1" type="checkbox" id="checkbox-${cardId}" />
            <span class="checkmark"></span>
          </label>
        </div>
      </div>
    `;

        // Create a new modal element
        const modalId = `exampleModal${day}${index}`;
        const modal = document.createElement("div");
        modal.className = "modal fade";
        modal.id = modalId;
        modal.tabIndex = -1;
        modal.setAttribute("aria-labelledby", "exampleModalLabel");
        modal.setAttribute("aria-hidden", "true");
        modal.innerHTML = `
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Comments</h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="mb-3">
                <label for="recipient-name" class="col-form-label">Comments:</label>
                <input type="text" class="form-control" id="recipient-name" />
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
              <input type="radio" class="btn-check" name="btnradio-${day}-${index}" id="btnradio1-${day}-${index}" autocomplete="off" checked>
              <input type="radio" class="btn-check" name="btnradio-${day}-${index}" id="btnradio1-${day}-${index}" autocomplete="off" value="positive" checked>
              <label class="btn btn-outline-success" for="btnradio1-${day}-${index}">positive</label>

              <input type="radio" class="btn-check" name="btnradio-${day}-${index}" id="btnradio2-${day}-${index}" autocomplete="off">
              <input type="radio" class="btn-check" name="btnradio-${day}-${index}" id="btnradio2-${day}-${index}" autocomplete="off" value="negative">
              <label class="btn btn-outline-danger" for="btnradio2-${day}-${index}">negative</label>
            </div>
            <input type="hidden" id="rating-${day}-${index}" value="positive">
            <button
              type="button"
              class="btn btn-outline-primary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    `;


        // Append the card and modal to their respective containers
        document.getElementById(`card${day}`).appendChild(card);
        document.body.appendChild(modal);
      }

      // Loop through your data and generate cards and modals
      function generateCards(day, assignments) {
        let index = 1;

        for (const key in assignments[day]) {
          const assignmentName = key;
          const taskName = assignments[day][key];
          generateCardAndModal(day, assignmentName, taskName, index);
          index++;
        }
      }

      generateCards("monday", assignments);
      generateCards("tuesday", assignments);
      generateCards("wednesday", assignments);
      generateCards("thursday", assignments);
      generateCards("friday", assignments);
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>
    <script src="../Statistics/statistics.js"></script>
  </body>
</html>
